webpackJsonp([1,0],[function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var a=s(141),n=i(a),o=s(140),r=i(o),c=s(139),u=i(c),d=s(103),p=i(d),l=s(111),f=i(l),m=s(113),v=i(m),g=s(116),h=i(g),_=s(119),C=i(_),x=s(49),y=s(50),b=i(y),j=new r.default({routes:[{path:"/",component:f.default},{path:"/chat/:uid?",component:f.default},{path:"/groupchat/:gid?",component:f.default},{path:"/group/:gid?",component:v.default},{path:"/roster",component:h.default},{path:"/settings",component:C.default}]});if(window.config={apiServer:"http://x.focus-dev.cn",uid:0,tk:"",time:"",bus:new n.default},b.default.login()){n.default.use(r.default).use(u.default),n.default.http.options.emulateJSON=!0;var E=new n.default({el:"#app",template:"<App/>",components:{App:p.default},router:j}),w=new x.IMSDK(E);setTimeout(function(){w.ntp(),w.start()},1e3)}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.EmojiClassic=e.SessionType=e.MessageType=void 0;var a,n=s(53),o=i(n);e.MessageType={TEXT:"TEXT",IMAGE:"IMAGE",FILE:"FILE",EMOJI:"EMOJI"},e.SessionType={CHAT:"CHAT",GROUPCHAT:"GROUPCHAT"},e.EmojiClassic=(a={"[微笑]":["微笑","[微笑]","/static/emoji/Expression_1.png"],"[撇嘴]":["撇嘴","[撇嘴]","/static/emoji/Expression_2.png"],"[色]":["色","[色]","/static/emoji/Expression_3.png"],"[发呆]":["发呆","[发呆]","/static/emoji/Expression_4.png"],"[得意]":["得意","[得意]","/static/emoji/Expression_5.png"],"[大哭]":["大哭","[大哭]","/static/emoji/Expression_6.png"],"[害羞]":["害羞","[害羞]","/static/emoji/Expression_7.png"],"[闭嘴]":["闭嘴","[闭嘴]","/static/emoji/Expression_8.png"],"[睡]":["睡","[睡]","/static/emoji/Expression_9.png"],"[流泪]":["流泪","[流泪]","/static/emoji/Expression_10.png"],"[尴尬]":["尴尬","[尴尬]","/static/emoji/Expression_11.png"],"[发怒]":["发怒","[发怒]","/static/emoji/Expression_12.png"],"[调皮]":["调皮","[调皮]","/static/emoji/Expression_13.png"],"[呲牙]":["呲牙","[呲牙]","/static/emoji/Expression_14.png"],"[惊讶]":["惊讶","[惊讶]","/static/emoji/Expression_15.png"],"[难过]":["难过","[难过]","/static/emoji/Expression_16.png"],"[酷]":["酷","[酷]","/static/emoji/Expression_17.png"],"[冷汗]":["冷汗","[冷汗]","/static/emoji/Expression_18.png"],"[抓狂]":["抓狂","[抓狂]","/static/emoji/Expression_19.png"],"[吐]":["吐","[吐]","/static/emoji/Expression_20.png"],"[偷笑]":["偷笑","[偷笑]","/static/emoji/Expression_21.png"],"[愉快]":["愉快","[愉快]","/static/emoji/Expression_22.png"],"[白眼]":["白眼","[白眼]","/static/emoji/Expression_23.png"],"[傲慢]":["傲慢","[傲慢]","/static/emoji/Expression_24.png"],"[饥饿]":["饥饿","[饥饿]","/static/emoji/Expression_25.png"],"[困]":["困","[困]","/static/emoji/Expression_26.png"],"[惊恐]":["惊恐","[惊恐]","/static/emoji/Expression_27.png"],"[流汗]":["流汗","[流汗]","/static/emoji/Expression_28.png"],"[憨笑]":["憨笑","[憨笑]","/static/emoji/Expression_29.png"],"[悠闲]":["悠闲","[悠闲]","/static/emoji/Expression_30.png"],"[奋斗]":["奋斗","[奋斗]","/static/emoji/Expression_31.png"],"[咒骂]":["咒骂","[咒骂]","/static/emoji/Expression_32.png"],"[疑问]":["疑问","[疑问]","/static/emoji/Expression_33.png"],"[嘘]":["嘘","[嘘]","/static/emoji/Expression_34.png"],"[晕]":["晕","[晕]","/static/emoji/Expression_35.png"]},(0,o.default)(a,"[抓狂]",["抓狂","[抓狂]","/static/emoji/Expression_36.png"]),(0,o.default)(a,"[衰]",["衰","[衰]","/static/emoji/Expression_37.png"]),(0,o.default)(a,"[骷髅]",["骷髅","[骷髅]","/static/emoji/Expression_38.png"]),(0,o.default)(a,"[敲打]",["敲打","[敲打]","/static/emoji/Expression_39.png"]),(0,o.default)(a,"[再见]",["再见","[再见]","/static/emoji/Expression_40.png"]),(0,o.default)(a,"[擦汗]",["擦汗","[擦汗]","/static/emoji/Expression_41.png"]),(0,o.default)(a,"[抠鼻]",["抠鼻","[抠鼻]","/static/emoji/Expression_42.png"]),(0,o.default)(a,"[鼓掌]",["鼓掌","[鼓掌]","/static/emoji/Expression_43.png"]),(0,o.default)(a,"[糗大了]",["糗大了","[糗大了]","/static/emoji/Expression_44.png"]),(0,o.default)(a,"[坏笑]",["坏笑","[坏笑]","/static/emoji/Expression_45.png"]),(0,o.default)(a,"[左哼哼]",["左哼哼","[左哼哼]","/static/emoji/Expression_46.png"]),(0,o.default)(a,"[右哼哼]",["右哼哼","[右哼哼]","/static/emoji/Expression_47.png"]),(0,o.default)(a,"[哈欠]",["哈欠","[哈欠]","/static/emoji/Expression_48.png"]),(0,o.default)(a,"[鄙视]",["鄙视","[鄙视]","/static/emoji/Expression_49.png"]),(0,o.default)(a,"[委屈]",["委屈","[委屈]","/static/emoji/Expression_50.png"]),(0,o.default)(a,"[快哭了]",["快哭了","[快哭了]","/static/emoji/Expression_51.png"]),(0,o.default)(a,"[阴险]",["阴险","[阴险]","/static/emoji/Expression_52.png"]),(0,o.default)(a,"[亲亲]",["亲亲","[亲亲]","/static/emoji/Expression_53.png"]),(0,o.default)(a,"[吓]",["吓","[吓]","/static/emoji/Expression_54.png"]),(0,o.default)(a,"[可怜]",["可怜","[可怜]","/static/emoji/Expression_55.png"]),(0,o.default)(a,"[菜刀]",["菜刀","[菜刀]","/static/emoji/Expression_56.png"]),(0,o.default)(a,"[西瓜]",["西瓜","[西瓜]","/static/emoji/Expression_57.png"]),(0,o.default)(a,"[啤酒]",["啤酒","[啤酒]","/static/emoji/Expression_58.png"]),(0,o.default)(a,"[篮球]",["篮球","[篮球]","/static/emoji/Expression_59.png"]),(0,o.default)(a,"[乒乓]",["乒乓","[乒乓]","/static/emoji/Expression_60.png"]),(0,o.default)(a,"[咖啡]",["咖啡","[咖啡]","/static/emoji/Expression_61.png"]),(0,o.default)(a,"[米饭]",["米饭","[米饭]","/static/emoji/Expression_62.png"]),(0,o.default)(a,"[猪头]",["猪头","[猪头]","/static/emoji/Expression_63.png"]),(0,o.default)(a,"[玫瑰]",["玫瑰","[玫瑰]","/static/emoji/Expression_64.png"]),(0,o.default)(a,"[凋谢]",["凋谢","[凋谢]","/static/emoji/Expression_65.png"]),(0,o.default)(a,"[嘴唇]",["嘴唇","[嘴唇]","/static/emoji/Expression_66.png"]),(0,o.default)(a,"[爱心]",["爱心","[爱心]","/static/emoji/Expression_67.png"]),(0,o.default)(a,"[心碎]",["心碎","[心碎]","/static/emoji/Expression_68.png"]),(0,o.default)(a,"[蛋糕]",["蛋糕","[蛋糕]","/static/emoji/Expression_69.png"]),(0,o.default)(a,"[闪电]",["闪电","[闪电]","/static/emoji/Expression_70.png"]),(0,o.default)(a,"[炸弹]",["炸弹","[炸弹]","/static/emoji/Expression_71.png"]),(0,o.default)(a,"[刀]",["刀","[刀]","/static/emoji/Expression_72.png"]),(0,o.default)(a,"[足球]",["足球","[足球]","/static/emoji/Expression_73.png"]),(0,o.default)(a,"[瓢虫]",["瓢虫","[瓢虫]","/static/emoji/Expression_74.png"]),(0,o.default)(a,"[便便]",["便便","[便便]","/static/emoji/Expression_75.png"]),(0,o.default)(a,"[月亮]",["月亮","[月亮]","/static/emoji/Expression_76.png"]),(0,o.default)(a,"[太阳]",["太阳","[太阳]","/static/emoji/Expression_77.png"]),(0,o.default)(a,"[礼物]",["礼物","[礼物]","/static/emoji/Expression_78.png"]),(0,o.default)(a,"[拥抱]",["拥抱","[拥抱]","/static/emoji/Expression_79.png"]),(0,o.default)(a,"[强]",["强","[强]","/static/emoji/Expression_80.png"]),(0,o.default)(a,"[弱]",["弱","[弱]","/static/emoji/Expression_81.png"]),(0,o.default)(a,"[握手]",["握手","[握手]","/static/emoji/Expression_82.png"]),(0,o.default)(a,"[胜利]",["胜利","[胜利]","/static/emoji/Expression_83.png"]),(0,o.default)(a,"[抱拳]",["抱拳","[抱拳]","/static/emoji/Expression_84.png"]),(0,o.default)(a,"[勾引]",["勾引","[勾引]","/static/emoji/Expression_85.png"]),(0,o.default)(a,"[拳头]",["拳头","[拳头]","/static/emoji/Expression_86.png"]),(0,o.default)(a,"[差劲]",["差劲","[差劲]","/static/emoji/Expression_87.png"]),(0,o.default)(a,"[爱你]",["爱你","[爱你]","/static/emoji/Expression_88.png"]),(0,o.default)(a,"[NO]",["NO","[NO]","/static/emoji/Expression_89.png"]),(0,o.default)(a,"[OK]",["OK","[OK]","/static/emoji/Expression_90.png"]),(0,o.default)(a,"[爱情]",["爱情","[爱情]","/static/emoji/Expression_91.png"]),(0,o.default)(a,"[飞吻]",["飞吻","[飞吻]","/static/emoji/Expression_92.png"]),(0,o.default)(a,"[跳跳]",["跳跳","[跳跳]","/static/emoji/Expression_93.png"]),(0,o.default)(a,"[发抖]",["发抖","[发抖]","/static/emoji/Expression_94.png"]),(0,o.default)(a,"[怄火]",["怄火","[怄火]","/static/emoji/Expression_95.png"]),(0,o.default)(a,"[转圈]",["转圈","[转圈]","/static/emoji/Expression_96.png"]),(0,o.default)(a,"[磕头]",["磕头","[磕头]","/static/emoji/Expression_97.png"]),(0,o.default)(a,"[回头]",["回头","[回头]","/static/emoji/Expression_98.png"]),(0,o.default)(a,"[跳绳]",["跳绳","[跳绳]","/static/emoji/Expression_99.png"]),(0,o.default)(a,"[投降]",["投降","[投降]","/static/emoji/Expression_100.png"]),(0,o.default)(a,"[激动]",["激动","[激动]","/static/emoji/Expression_101.png"]),(0,o.default)(a,"[乱舞]",["乱舞","[乱舞]","/static/emoji/Expression_102.png"]),(0,o.default)(a,"[献吻]",["献吻","[献吻]","/static/emoji/Expression_103.png"]),(0,o.default)(a,"[左太极]",["左太极","[左太极]","/static/emoji/Expression_104.png"]),(0,o.default)(a,"[右太极]",["右太极","[右太极]","/static/emoji/Expression_105.png"]),(0,o.default)(a,"[奸笑]",["奸笑","[奸笑]","/static/emoji/Expression_106.png"]),(0,o.default)(a,"[嘿哈]",["嘿哈","[嘿哈]","/static/emoji/Expression_107.png"]),(0,o.default)(a,"[捂脸]",["捂脸","[捂脸]","/static/emoji/Expression_108.png"]),(0,o.default)(a,"[机智]",["机智","[机智]","/static/emoji/Expression_109.png"]),(0,o.default)(a,"[茶]",["茶","[茶]","/static/emoji/Expression_110.png"]),(0,o.default)(a,"[红包]",["红包","[红包]","/static/emoji/Expression_111.png"]),(0,o.default)(a,"[耶]",["耶","[耶]","/static/emoji/Expression_113.png"]),(0,o.default)(a,"[皱眉]",["皱眉","[皱眉]","/static/emoji/Expression_114.png"]),a)},,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,s){var i,a;s(101),i=s(40);var n=s(137);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=n.render,a.staticRenderFns=n.staticRenderFns,a._scopeId="data-v-cd2fdd4e",t.exports=i},function(t,e,s){var i,a;s(90),i=s(41);var n=s(126);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=n.render,a.staticRenderFns=n.staticRenderFns,a._scopeId="data-v-3a9f4a96",t.exports=i},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(104),n=i(a),o=s(29),r=i(o);e.default={name:"app",components:{Toolbar:n.default,Profile:r.default}}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(29);i(a);e.default={name:"Toolbar",data:function(){var t=/#\/(\w+)(\/.*)?/.exec(location.hash);return{type:t?t[1]:"chat",userInfo:{}}},components:{},methods:{changeToolbar:function(t){this.type=t,this.hash="/#/"+t},showProfile:function(t){config.bus.$emit("profile",config.uid,t)}},mounted:function(){var t=this,e=this;this.$http.get(config.apiServer+"/api/v1/rosters/"+config.uid).then(function(e){var s=e.data;200==s.code&&s.data&&(t.userInfo=s.data)},function(t){}),config.bus.$on("makechat",function(){e.type="chat"})}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"GroupBar",props:["curSession"],data:function(){return{groupInfo:{},members:[],currentTab:1,option:{top:!1,remind:!1,favor:!1}}},methods:{changeTab:function(t){this.currentTab=t},addGroupMembers:function(){alert("to be continued")},switchOption:function(t){var e=this,s={};s[t]=!this.option[t],this.$http.post(config.apiServer+"/api/v1/groups/"+this.curSession.id+"/"+t,s).then(function(s){e.option[t]=!e.option[t],console.log(s.data)},function(t){alert("500")})},leaveGroup:function(){alert("to be continued")}},mounted:function(){var t=this;this.$http.get(config.apiServer+"/api/v1/groups/"+this.curSession.id).then(function(e){var s=e.data;200==s.code&&s.data&&(t.groupInfo=s.data,t.option=t.groupInfo.option)}),this.$http.get(config.apiServer+"/api/v1/groups/"+this.curSession.id+"/members").then(function(e){var s=e.data;200==s.code&&s.data&&(t.members=s.data)})}}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(108),n=i(a),o=s(105),r=i(o),c=s(107),u=i(c),d=s(110),p=i(d),l=s(1);e.default={name:"MessageBox",props:["curSession"],components:{ProfileBar:n.default,GroupBar:r.default,MessageList:u.default,SendBox:p.default},data:function(){return{SessionType:l.SessionType,showSidebar:!0,messageWrapper:{},messageList:[]}},methods:{toggleSidebar:function(){this.showSidebar=!this.showSidebar},sendMessage:function(t){var e=this;t.sessionType=this.curSession.type,t.toId=this.curSession.id,t.timestamp=config.time,this.$http.post(config.apiServer+"/api/v1/messages",t).then(function(t){var s=t.data;200==s.code&&s.data&&(e.messageList.push(s.data),delete e.messageWrapper[e.curSession.id],e.$emit("showLastest"))},function(t){})},fetchMessages:function(t,e,s){var i={offset:t,limit:e};this.curSession.type==l.SessionType.CHAT?i.toUid=this.curSession.id:this.curSession.type==l.SessionType.GROUPCHAT&&(i.gid=this.curSession.id),this.$http.get(config.apiServer+"/api/v1/messages/"+this.curSession.type.toLowerCase(),{params:i}).then(function(t){var e=t.data;200==e.code&&e.data&&s(e.data)})},setMessageList:function(t){this.messageList=t,this.$emit("showLastest")},pageMessages:function(){var t=this.messageWrapper[this.curSession.id],e=this;return t?this.setMessageList(t.messageList):(t={offset:0,limit:10,messageList:[]},this.fetchMessages(t.offset,t.limit,function(s){t.messageList=s.reverse().concat(t.messageList),t.offset+=t.limit,e.setMessageList(t.messageList)}),this.messageWrapper[this.curSession.id]=t),t}},mounted:function(){var t=this;config.bus.$on("message",function(e){var s=JSON.parse(e);t.curSession.id==s.uid&&(t.messageList.push(s),t.$emit("showLastest")),delete t.messageWrapper[s.id]}),this.pageMessages(),this.$watch("curSession",function(t,e){this.pageMessages()})}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(1);e.default={name:"MessageList",props:["messageList"],components:{},data:function(){return{meUid:config.uid,MessageType:i.MessageType,EmojiClassic:i.EmojiClassic}},methods:{showProfile:function(t){config.bus.$emit("profile",t,event)}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ProfileBar",props:["curSession"],data:function(){return{personInfo:{}}},methods:{showProfile:function(){}},computed:{trigger:function(){var t=this;return this.$http.get(config.apiServer+"/api/v1/rosters/"+this.curSession.id).then(function(e){var s=e.data;200==s.code&&s.data&&(t.personInfo=s.data)}),{}}}}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(16),n=i(a);e.default={data:function(){return{add:!1,keyword:"",rosterList:[],rosterSelected:[]}},methods:{addChat:function(){this.add=!0},suggest:function(t){var e=this,s=t.target.value;return s?void this.$http.get(config.apiServer+"/api/v1/search/user",{params:{keyword:s}}).then(function(t){var s=t.data;200==s.code&&s.data&&(e.rosterList=s.data)}):void(this.rosterList=[])},select:function(t){var e=this.rosterSelected.findIndex(function(e){return e.uid==t.uid});e<0?this.rosterSelected.push(t):this.rosterSelected.splice(e,1)},makeGroup:function(){var t=this,e=[],s=[],i=!0,a=!1,o=void 0;try{for(var r,c=(0,n.default)(this.rosterSelected);!(i=(r=c.next()).done);i=!0){var u=r.value;e.push(u.name),s.push(u.uid)}}catch(t){a=!0,o=t}finally{try{!i&&c.return&&c.return()}finally{if(a)throw o}}console.log(e,s),this.$http.post(config.apiServer+"/api/v1/groups",{name:e.join("、").substring(0,20)+"...",members:s}).then(function(e){var s=e.data;200==s.code&&s.data&&(t.add=!1)})}},mounted:function(){}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(1);e.default={name:"SendBox",data:function(){return{EmojiClassic:i.EmojiClassic,inputText:"",imageRegExp:/(gif|jpeg|jpg|png|bmp)$/i,type:i.MessageType.TEXT,url:"",upload:!1,emoji:!1}},methods:{showEmoji:function(t){this.type=i.MessageType.EMOJI;var e=t.target.x,s=(t.target.y,t.target.clientWidth),a=t.target.clientHeight;this.vstyle="left: "+(e-204+s/2)+"px; top: "+(a-170)+"px;",this.emoji=!this.emoji},sendEmoji:function(t){this.inputText=t,this.emoji=!1,this.sendMessage()},uploadFile:function(){this.upload=!0,setTimeout(function(){document.getElementById("uploadFile").click()},100)},onAddFile:function(t){var e=this,s=t.target.files[0],a=s.name;this.imageRegExp.test(a)?(this.type=i.MessageType.IMAGE,console.log("send image")):(this.type=i.MessageType.FILE,console.log("send normal file"));var n=new FormData;n.append("file",s),n.append("type",this.type),this.$http.post(config.apiServer+"/api/v1/image/upload",n).then(function(t){var s=t.data;200==s.code&&s.data&&(e.url=s.data.url)},function(t){alert(t.data)}),this.upload=!1},sendMessage:function(){if(!this.inputText.trim()&&!this.url)return void alert("发送内容不能为空");var t={};t.type=this.type,t.content=this.inputText||this.url,this.$emit("sendMessage",t),this.inputText="",this.type=i.MessageType.TEXT,this.url=""},doSendMessage:function(t){t.shiftKey?t.returnValue=!1:(t.returnValue=!1,this.sendMessage())}}}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(109),n=i(a),o=s(112),r=i(o),c=s(106),u=i(c),d=s(28),p=i(d);e.default={data:function(){return{curSession:{},sessionList:[],offset:0,limit:10}},components:{SearchBox:n.default,SessionList:r.default,MessageBox:u.default,Empty:p.default},methods:{showSession:function(t,e){return t?(void 0!==e&&(t.unread=0),this.curSession=t,location.href="/#/"+t.type.toLowerCase()+"/"+t.id,this.showLastest(),void this.readSession(t)):void(location.href="/#/")},showLastest:function(){setTimeout(function(){var t=document.getElementById("messageListBox");t.scrollTop=t.scrollHeight},100)},fetchSessions:function(t){console.log("fetchSessions",this.offset,this.limit),this.$http.get(config.apiServer+"/api/v1/sessions",{params:{offset:this.offset,limit:this.limit}}).then(function(e){var s=e.data;200==s.code&&s.data&&t(s.data.reverse())},function(t){console.log("fetchSessions error",t)})},readSession:function(t){t.unread>0&&(this.$http.post(config.apiServer+"/api/v1/sessions/"+t.id+"/read"),t.unread=0)}},mounted:function(){var t=this;this.fetchSessions(function(e){t.sessionList=e;var s=/#\/(\w+)\/(\d+)(.*)?/.exec(location.hash);if(s){var i=e.filter(function(t){return t.id==s[2]});t.showSession(0==i.length?null:i[0])}else t.showSession(null)}),config.bus.$on("session",function(e){var s=JSON.parse(e),i=t.sessionList.findIndex(function(t){return t.id==s.id});i>=0?(t.sessionList.splice(i,1),t.sessionList.unshift(s)):t.sessionList.unshift(s),t.curSession.id==s.id&&(t.curSession=s,t.readSession(s))})}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(1);e.default={name:"SessionList",props:["sessionList","curSession"],data:function(){return{SessionType:i.SessionType}},methods:{showSession:function(t,e){this.$emit("showSession",t,e)}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"Empty"}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(1);e.default={name:"Profile",props:["profile"],data:function(){return{imageRegExp:/(gif|jpeg|jpg|png|bmp)$/i,me:config.uid,shown:!1,roster:{},vstyle:"",avatar:!1,signature:!1,tel:!1,mobile:!1}},methods:{modify:function(){var t=this;this.avatar=!1,this.signature=!1,this.tel=!1,this.mobile=!1,this.$http.post(config.apiServer+"/api/v1/rosters/"+this.me,{avatar:this.roster.avatar,signature:this.roster.signature,tel:this.roster.tel,mobile:this.roster.mobile}).then(function(e){t.roster=e.data.data})},uploadFile:function(){document.getElementById("file").click()},onAddFile:function(t){var e=this,s=t.target.files[0],a=s.name;this.imageRegExp.test(a)?(this.type=i.MessageType.IMAGE,console.log("send image")):(this.type=i.MessageType.FILE,console.log("send normal file"));var n=new FormData;n.append("file",s),n.append("type",this.type),this.$http.post(config.apiServer+"/api/v1/image/upload",n).then(function(t){var s=t.data;200==s.code&&s.data&&(e.roster.avatar=s.data.url,e.modify())},function(t){})}},computed:{isMe:function(){return this.roster.uid==this.me}},mounted:function(){var t=this;config.bus.$on("profile",function(e,s){t.shown=!0,console.log("event bus"),t.$http.get(config.apiServer+"/api/v1/rosters/"+e).then(function(e){var s=e.data;200==s.code&&s.data&&(t.roster=s.data)});var i=document.body.clientWidth,a=(document.body.clientHeight,s.target.x),n=s.target.y,o=s.target.clientWidth,r=(s.target.clientHeight,320),c=400,u=a+o+20,d=n-c/2;u+r>i&&(u=a-320-10),u<0&&(u=10),d<0&&(d=10),t.vstyle="left: "+u+"px; top: "+d+"px;"})}}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(115),n=i(a),o=s(114),r=i(o);e.default={name:"GroupBox",data:function(){return{groupList:[],groupInfo:{}}},components:{GroupList:n.default,GroupInfo:r.default},methods:{showGroupInfo:function(t){var e=this;this.$http.get(config.apiServer+"/api/v1/groups/"+t).then(function(t){var s=t.data;200==s.code&&s.data&&(e.groupInfo=s.data)},function(t){})}},mounted:function(){var t=this;this.$http.get(config.apiServer+"/api/v1/groups").then(function(e){var s=e.data;200==s.code&&s.data&&(t.groupList=s.data)},function(t){})}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"GroupInfo"}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"GroupList",props:["groupList"],methods:{showGroupInfo:function(t){this.$emit("showGroupInfo",t)}}}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(118),n=i(a),o=s(117),r=i(o),c=s(28),u=i(c);e.default={name:"RosterBox",data:function(){return{rosterList:[],rosterInfo:{}}},components:{RosterList:n.default,RosterInfo:r.default,Empty:u.default},methods:{showRoster:function(t,e){console.log(t),this.rosterInfo=t}},mounted:function(){var t=this;this.$http.get(config.apiServer+"/api/v1/rosters").then(function(e){var s=e.data;200==s.code&&s.data&&(t.rosterList=s.data)},function(t){})}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(1);e.default={name:"RosterInfo",props:["rosterInfo"],data:function(){return{me:config.uid}},methods:{makeChat:function(t){this.$http.post(config.apiServer+"/api/v1/sessions",{toId:t.uid,type:i.SessionType.CHAT}).then(function(e){console.log("create chat with "+t.uid),config.bus.$emit("makechat"),location.href="/#/"+i.SessionType.CHAT.toLowerCase()+"/"+t.uid})}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"RosterList",props:["rosterList"],methods:{showRoster:function(t,e){this.$emit("showRoster",t,e)}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"SettingsBox"}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.IMSDK=void 0;var a=s(51),n=i(a),o=s(52),r=i(o),c=s(1);i(c),e.IMSDK=function(){function t(e){(0,n.default)(this,t),this.http=e.$http}return(0,r.default)(t,[{key:"start",value:function(){var t=new EventSource(config.apiServer+"/sse/event/"+config.uid+"/"+config.tk,{withCredentials:!0});t.addEventListener("message",function(t){console.log("message",t.data),config.bus.$emit("message",t.data)}),t.addEventListener("session",function(t){console.log("session",t.data),config.bus.$emit("session",t.data)}),t.addEventListener("error",function(t){console.log("error",t)})}},{key:"heartBeat",value:function(){}},{key:"ntp",value:function(){var t=(new Date).getTime();this.http.get(config.apiServer+"/api/v1/ntp").then(function(e){var s=e.data;if(200==s.code&&s.data&&s.data.time){var i=(new Date).getTime();config.time=Math.round(s.data.time-(i-t)/2)}},function(t){console.error("sync ntp error",t)})}}]),t}()},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(16),n=i(a);e.default={name:"LoginSDK",data:function(){},login:function(){var t=this.parseCookie();return t.uid&&t.tk?(window.config.uid=t.uid,window.config.tk=t.tk,!0):(location.href=config.apiServer+"/login",!1)},logout:function(){location.href=config.apiServer+"/logout"},parseCookie:function(){var t,e,s=document.cookie.split(";"),i=!0,a=!1,o=void 0;try{for(var r,c=(0,n.default)(s);!(i=(r=c.next()).done);i=!0){var u=r.value,d=u.trim().split("=");if("im_uid"==d[0]){var p=d[1].split("|");t=p[0]}"im_tk"==d[0]&&(e=d[1])}}catch(t){a=!0,o=t}finally{try{!i&&c.return&&c.return()}finally{if(a)throw o}}return{uid:t,tk:e}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,s){var i,a;s(96),i=s(30);var n=s(132);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=n.render,a.staticRenderFns=n.staticRenderFns,t.exports=i},function(t,e,s){var i,a;s(84),i=s(31);var n=s(120);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=n.render,a.staticRenderFns=n.staticRenderFns,a._scopeId="data-v-043bab8a",t.exports=i},function(t,e,s){var i,a;s(99),i=s(32);var n=s(135);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=n.render,a.staticRenderFns=n.staticRenderFns,a._scopeId="data-v-7361922a",t.exports=i},function(t,e,s){var i,a;s(95),i=s(33);var n=s(131);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=n.render,a.staticRenderFns=n.staticRenderFns,a._scopeId="data-v-5886134a",t.exports=i},function(t,e,s){var i,a;s(98),i=s(34);var n=s(134);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=n.render,a.staticRenderFns=n.staticRenderFns,a._scopeId="data-v-7079afbe",t.exports=i},function(t,e,s){var i,a;s(94),i=s(35);var n=s(130);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=n.render,a.staticRenderFns=n.staticRenderFns,a._scopeId="data-v-57034cc1",t.exports=i},function(t,e,s){var i,a;s(92),i=s(36);var n=s(128);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=n.render,a.staticRenderFns=n.staticRenderFns,a._scopeId="data-v-473ddabc",t.exports=i},function(t,e,s){var i,a;s(102),i=s(37);var n=s(138);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=n.render,a.staticRenderFns=n.staticRenderFns,a._scopeId="data-v-eeb86dc8",t.exports=i},function(t,e,s){var i,a;s(87),i=s(38);var n=s(123);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=n.render,a.staticRenderFns=n.staticRenderFns,a._scopeId="data-v-0a4944ec",t.exports=i},function(t,e,s){var i,a;s(88),i=s(39);var n=s(124);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=n.render,a.staticRenderFns=n.staticRenderFns,a._scopeId="data-v-0b77334d",t.exports=i},function(t,e,s){var i,a;s(97),i=s(42);var n=s(133);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=n.render,a.staticRenderFns=n.staticRenderFns,a._scopeId="data-v-6b877b68",t.exports=i},function(t,e,s){var i,a;s(85),i=s(43);var n=s(121);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=n.render,a.staticRenderFns=n.staticRenderFns,a._scopeId="data-v-044a0dfd",t.exports=i},function(t,e,s){var i,a;s(93),i=s(44);var n=s(129);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=n.render,a.staticRenderFns=n.staticRenderFns,a._scopeId="data-v-49e3e1ed",t.exports=i},function(t,e,s){var i,a;s(100),i=s(45);var n=s(136);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=n.render,a.staticRenderFns=n.staticRenderFns,a._scopeId="data-v-8d141728",t.exports=i},function(t,e,s){var i,a;s(86),i=s(46);var n=s(122);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=n.render,a.staticRenderFns=n.staticRenderFns,a._scopeId="data-v-0772c046",t.exports=i},function(t,e,s){var i,a;s(91),i=s(47);var n=s(127);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=n.render,a.staticRenderFns=n.staticRenderFns,a._scopeId="data-v-41e073cd",t.exports=i},function(t,e,s){var i,a;s(89),i=s(48);var n=s(125);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=n.render,a.staticRenderFns=n.staticRenderFns,a._scopeId="data-v-1c94066c",t.exports=i},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",{attrs:{id:"toolbar"}},[e("div",{staticClass:"userinfo",attrs:{title:t.userInfo.name}},[e("img",{staticClass:"large-avatar round-avatar",attrs:{src:t.userInfo.avatar},on:{click:t.showProfile}})])," ",e("div",{staticClass:"tool"},[e("div",{staticClass:"app-item",class:{active:"chat"==t.type},attrs:{title:"消息"}},[e("div",{staticClass:"activebar"})," ",e("a",{attrs:{href:"/#/chat"},on:{click:function(e){t.changeToolbar("chat")}}},[e("i",{staticClass:"iconfont icon-liaotian"})])])," ",e("div",{staticClass:"app-item",class:{active:"group"==t.type},attrs:{title:"群组"}},[e("div",{staticClass:"activebar"})," ",e("a",{attrs:{href:"/#/group"},on:{click:function(e){t.changeToolbar("group")}}},[e("i",{staticClass:"iconfont icon-qunzu"})])])," ",e("div",{staticClass:"app-item",class:{active:"roster"==t.type},attrs:{title:"通讯录"}},[e("div",{staticClass:"activebar"})," ",e("a",{attrs:{href:"/#/roster"},on:{click:function(e){t.changeToolbar("roster")}}},[e("i",{staticClass:"iconfont icon-tongxunlu"})])])])," ",e("div",{staticClass:"settings"},[e("div",{staticClass:"app-item",class:{active:"settings"==t.type},attrs:{title:"设置"}},[e("div",{staticClass:"activebar"})," ",e("a",{attrs:{href:"/#/settings"},on:{click:function(e){t.changeToolbar("settings")}}},[e("i",{staticClass:"iconfont icon-shezhi"})])])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this;t.$createElement;return t._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement;return e("div",{staticClass:"groupinfo-wrapper"},[e("div",{staticClass:"groupinfo"})])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",{staticClass:"rosterinfo-wrapper"},[e("div",{staticClass:"rosterinfo"},[e("div",{staticClass:"personinfo-wrapper"},[e("img",{staticClass:"round-avatar xlarge-avatar",attrs:{src:t.rosterInfo.avatar}})," ",e("div",{staticClass:"personinfo"},[e("div",{staticClass:"name"},[t._s(t.rosterInfo.name)])," ",e("div",{staticClass:"email"},[t._s(t.rosterInfo.email)])," ",e("div",{staticClass:"department"},[t._s(t.rosterInfo.department)])])," ",e("div",{staticClass:"extrainfo"},[e("div",{staticClass:"desc-label"},["个性签名"])," ",e("div",{staticClass:"desc"},[t._s(t.rosterInfo.signature)])])," ",t.rosterInfo.uid!=t.me?e("button",{staticClass:"chat-button button button-primary",on:{click:function(e){t.makeChat(t.rosterInfo)}}},["发起聊天"]):t._e()])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",[e("div",{staticClass:"sessionbox-wrapper"},[e("div",{staticClass:"sessionbox"},[e("SearchBox")," ",e("SessionList",{attrs:{sessionList:t.sessionList,curSession:t.curSession},on:{showSession:t.showSession}})])])," ",e("div",{staticClass:"messagebox-wrapper"},[t.curSession.id?e("MessageBox",{staticClass:"messagebox",attrs:{curSession:t.curSession},on:{showLastest:t.showLastest}}):e("Empty")," "])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;
return e("div",{staticClass:"session-list-wrapper"},[e("ul",{staticClass:"session-list"},[t._l(t.sessionList,function(s,i){return e("li",{staticClass:"session",class:{selected:t.curSession.id==s.id},on:{click:function(e){t.showSession(s,i)}}},[e("div",{staticClass:"avatar"},[e("img",{staticClass:"large-avatar round-avatar",attrs:{src:s.avatar}})])," ",e("div",{staticClass:"session-badge",class:{hide:0==s.unread}},[e("span",{staticClass:"badge-num"},[t._s(s.unread)])])," ",e("div",{staticClass:"name"},[e("span",{staticClass:"content"},[e("span",[t._s(s.name)])," ",e("span",["  "])])])," ",e("div",{staticClass:"desc"},[s.type==t.SessionType.GROUPCHAT&&s.lastName?e("span",[t._s(s.lastName+"：")]):t._e()," ",e("span",[t._s(s.lastContent)])])," ",e("span",{staticClass:"time"},[t._s(s.time)])])})])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",{staticClass:"empty"})},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return t.shown?e("div",{staticClass:"profile-wrapper",on:{click:function(e){e.target===e.currentTarget&&(t.shown=!t.shown)}}},[e("div",{staticClass:"profile-dialog-inner person-vcard-dialog",style:t.vstyle,attrs:{id:"vcard"}},[e("div",{staticClass:"close"},[e("i",{staticClass:"iconfont icon-guanbi",on:{click:function(e){t.shown=!1}}})])," ",e("div",{staticClass:"header"},[e("div",{staticClass:"person"},[e("div",{staticClass:"wrapper-avatar"},[e("img",{staticClass:"round-avatar xlarge-avatar",attrs:{src:t.roster.avatar}})," ",t.isMe?e("div",{staticClass:"editmask",on:{click:t.uploadFile}},["修改"]):t._e()," ",t.isMe?e("input",{staticStyle:{display:"none"},attrs:{type:"file",name:"file",id:"file"},on:{change:t.onAddFile}}):t._e()])," ",e("div",{staticClass:"info"},[e("div",{staticClass:"wrapper-name"},[e("div",{staticClass:"name"},[t._s(t.roster.name)])," ",t._m(0)])," ",e("div",{staticClass:"passport"},[t._s(t.roster.mailNickname)])])])," ",e("div",{staticClass:"signature"},[e("div",{staticClass:"text-vard"},[t._s(t.roster.signature?t.roster.signature:"这个人很懒，什么都没写~~")])," ",t.isMe?e("i",{staticClass:"iconfont icon-bianji banji",on:{click:function(e){t.signature=!0}}}):t._e()," ",t.isMe?e("input",{directives:[{name:"show",rawName:"v-show",value:t.signature,expression:"signature"},{name:"model",rawName:"v-model",value:t.roster.signature,expression:"roster.signature"}],staticClass:"banji-input",attrs:{type:"input"},domProps:{value:t._s(t.roster.signature)},on:{blur:t.modify,input:function(e){e.target.composing||(t.roster.signature=e.target.value)}}}):t._e()])])," ",e("div",{staticClass:"content"},[e("ul",{staticClass:"list"},[e("li",{staticClass:"item"},[e("div",{staticClass:"tips"},["部门"])," ",e("div",{staticClass:"value"},[t._s(t.roster.department)])])," ",e("li",{staticClass:"item"},[e("div",{staticClass:"tips"},["工位"])," ",e("div",{staticClass:"value"},[t._s(t.roster.office)])])," ",e("li",{staticClass:"item"},[e("div",{staticClass:"tips"},["手机"])," ",e("div",{staticClass:"value"},[e("span",[t._s(t.roster.mobile?t.roster.mobile:"未填写")])," ",t.isMe?e("i",{staticClass:"iconfont icon-bianji banji",on:{click:function(e){t.mobile=!0}}}):t._e()," ",t.isMe?e("input",{directives:[{name:"show",rawName:"v-show",value:t.mobile,expression:"mobile"},{name:"model",rawName:"v-model",value:t.roster.mobile,expression:"roster.mobile"}],staticClass:"banji-input",attrs:{type:"tel"},domProps:{value:t._s(t.roster.mobile)},on:{blur:t.modify,input:function(e){e.target.composing||(t.roster.mobile=e.target.value)}}}):t._e()])])," ",e("li",{staticClass:"item"},[e("div",{staticClass:"tips"},["分机"])," ",e("div",{staticClass:"value"},[e("span",[t._s(t.roster.tel?t.roster.tel:"未填写")])," ",t.isMe?e("i",{staticClass:"iconfont icon-bianji banji",on:{click:function(e){t.tel=!0}}}):t._e()," ",t.isMe?e("input",{directives:[{name:"show",rawName:"v-show",value:t.tel,expression:"tel"},{name:"model",rawName:"v-model",value:t.roster.tel,expression:"roster.tel"}],staticClass:"banji-input",attrs:{type:"tel"},domProps:{value:t._s(t.roster.tel)},on:{blur:t.modify,input:function(e){e.target.composing||(t.roster.tel=e.target.value)}}}):t._e()])])])])," ",t._m(1)," ",e("div",{staticStyle:{display:"none"}})])]):t._e()},staticRenderFns:[function(){var t=this,e=t.$createElement;return e("div",{staticClass:"gender"},[e("i",{staticClass:"dxicon dxicon-gender-man"})])},function(){var t=this,e=t.$createElement;return e("div",{staticClass:"footer"},[e("div",{staticClass:"btn"},["发消息"])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",{staticClass:"rosterlist-wrapper"},[e("ul",{staticClass:"rosterlist"},[t._l(t.rosterList,function(s,i){return e("li",{staticClass:"roster",on:{click:function(e){t.showRoster(s,i)}}},[e("img",{staticClass:"large-avatar avatar",attrs:{src:s.avatar}})," ",e("div",{staticClass:"name"},[e("span",[t._s(s.name)])])])})])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",{staticClass:"search-wrapper"},[t._m(0)," ",e("div",{staticClass:"addchat"},[e("span",{staticClass:"iconfont icon-tianjiaqunliao",attrs:{title:"发起聊天"},on:{click:t.addChat}})])," ",e("transition",{attrs:{name:"fade"}},[t.add?e("div",{staticClass:"addchat-wrapper",on:{keyup:function(e){t._k(e.keyCode,"esc",27)||(t.add=!1)}}},[e("div",{staticClass:"header"},[e("div",{staticClass:"title"},["发起聊天"])," ",e("i",{staticClass:"iconfont icon-guanbi",on:{click:function(e){t.add=!1}}})])," ",e("div",{staticClass:"content"},[e("div",{staticClass:"content-wrapper"},[e("div",{staticClass:"wrapper-selectMembers"},[e("div",{staticClass:"title-bar"},[e("span",["选择成员"])])," ",e("div",{staticClass:"suggest"},[e("div",{staticClass:"ctn-ipt"},[e("i",{staticClass:"iconfont icon-sousuo"})," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"text",autocomplete:"off",placeholder:"请输入账号全称或中文名进行搜索"},domProps:{value:t._s(t.keyword)},on:{keyup:t.suggest,input:function(e){e.target.composing||(t.keyword=e.target.value)}}})])])," ",e("div",{staticClass:"comp-tab start-chat-org-contact"},[e("div",{staticClass:"tab-panel"},[e("div",{staticClass:"start-chat-contact"},[t._l(t.rosterList,function(s){return e("div",{staticClass:"start-chat-person"},[e("label",{staticClass:"comp-checkbox"},[e("input",{attrs:{type:"checkbox"},on:{click:function(e){t.select(s)}}})])," ",e("div",{staticClass:"avatar"},[e("img",{staticClass:"round-avatar large-avatar",attrs:{src:s.avatar}})])," ",e("span",{staticClass:"name"},[t._s(s.name)])])})])])])])," ",e("div",{staticClass:"wrapper-selected"},[e("div",{staticClass:"title"},[e("span",["已选成员 ( "])," ",e("span",[t._s(t.rosterSelected.length)])," ",e("span",[" )"])])," ",e("div",{staticClass:"wrapper-selectNode"},[e("div",{staticClass:"selectNodes"},[t._l(t.rosterSelected,function(s){return e("div",[e("div",{staticClass:"section-selectNode"},[e("i",{staticClass:"iconfont icon-guanbi",on:{click:function(e){t.select(s)}}})," ",e("div",{staticClass:"avatar"},[e("img",{staticClass:"large-avatar round-avatar",attrs:{src:s.avatar}})])," ",e("span",{staticClass:"name"},[t._s(s.name)])])])})])])])])])," ",e("div",{staticClass:"footer"},[e("button",{staticClass:"button",on:{click:function(e){t.add=!1}}},["取 消"])," ",e("button",{staticClass:"button button-primary",attrs:{disabled:0==t.rosterSelected.length},on:{click:t.makeGroup}},["确 定"])])]):t._e()])])},staticRenderFns:[function(){var t=this,e=t.$createElement;return e("div",{staticClass:"search"},[e("span",{staticClass:"icon iconfont icon-sousuo",attrs:{"aria-hidden":"true"}})," ",e("input",{attrs:{type:"text",name:"search"}})])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",{staticClass:"grouplist-wrapper"},[e("ul",{staticClass:"grouplist"},[t._l(t.groupList,function(s){return e("li",{staticClass:"group",on:{click:function(e){t.showGroupInfo(s.id)}}},[e("img",{staticClass:"large-avatar avatar",attrs:{src:s.avatar}})," ",e("div",{staticClass:"name"},[e("span",[t._s(s.name)])])])})])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",{staticClass:"personinfo-wrapper",attrs:{trigger:t.trigger}},[e("img",{staticClass:"round-avatar xlarge-avatar",attrs:{src:t.personInfo.avatar},on:{click:t.showProfile}})," ",e("div",{staticClass:"personinfo"},[e("div",{staticClass:"name"},[t._s(t.personInfo.name)])," ",e("div",{staticClass:"email"},[t._s(t.personInfo.email)])," ",e("div",{staticClass:"department"},[t._s(t.personInfo.department)])])," ",e("div",{staticClass:"extrainfo"},[e("div",{staticClass:"desc-label"},["个性签名"])," ",e("div",{staticClass:"desc"},[t._s(t.personInfo.desc)])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",[e("div",{staticClass:"title-wrapper head-wrapper"},[e("div",{staticClass:"title"},[e("span",[t._s(t.curSession.name)])])," ",e("div",{staticClass:"profile",class:{"show-sidebar":t.showSidebar}},[e("span",{staticClass:"iconfont icon-yonghu",on:{click:t.toggleSidebar}})," ",e("span",{staticClass:"arrow-top"})])])," ",e("div",{staticClass:"message-box-wrapper",class:{"show-sidebar":t.showSidebar}},[e("div",{staticClass:"message-list-wrapper",attrs:{id:"messageListBox"}},[e("MessageList",{attrs:{messageList:t.messageList}})])," ",e("div",{staticClass:"sendbox-wrapper"},[e("SendBox",{on:{sendMessage:t.sendMessage}})])," ",t.showSidebar?e("div",{staticClass:"sidebar"},[t.curSession.type==t.SessionType.CHAT?e("ProfileBar",{attrs:{curSession:t.curSession}}):t._e()," ",t.curSession.type==t.SessionType.GROUPCHAT?e("GroupBar",{attrs:{curSession:t.curSession}}):t._e()]):t._e()])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",{attrs:{id:"app"}},[e("Toolbar")," ",e("div",{attrs:{id:"main"}},[e("router-view")])," ",e("Profile")])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",[e("GroupList",{attrs:{groupList:t.groupList}})," ",e("GroupInfo",{attrs:{groupInfo:t.groupInfo}})])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",{staticClass:"message-list-box"},[t._m(0)," ",e("div",{staticClass:"message-list"},[t._l(t.messageList,function(s){return e("div",{staticClass:"message-item-wrapper",class:s.uid==t.meUid?"me":"you"},[e("div",{staticClass:"message-item"},[e("div",{staticClass:"avatar"},[e("img",{staticClass:"medium-avatar",attrs:{src:s.avatar},on:{click:function(e){t.showProfile(s.uid)}}})])," ",e("div",{staticClass:"right-content"},[s.uid!=t.meUid?e("div",{staticClass:"person"},[e("span",{staticClass:"nickname"},[t._s(s.name)])]):t._e()," ",t._m(1,!0)," ",e("div",{staticClass:"message-container"},[e("div",{staticClass:"content"},[s.type==t.MessageType.TEXT?e("pre",[t._s(s.content)]):t._e()," ",s.type==t.MessageType.IMAGE?e("img",{attrs:{src:s.content}}):t._e()," ",s.type==t.MessageType.EMOJI?e("img",{staticClass:"emoji",attrs:{src:t.EmojiClassic[s.content][2]}}):t._e()])])])])])})])])},staticRenderFns:[function(){var t=this,e=t.$createElement;return e("div",[e("div",{staticClass:"loading-wrapper loaded"},["没有更多数据了"])])},function(){var t=this,e=t.$createElement;return e("div",{staticClass:"bubble-corner-container"},[e("i",{staticClass:"dxicon bubble-corner left lfc dxicon-lfc"})])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",{staticClass:"groupinfo-wrapper"},[e("div",{staticClass:"tab-header"},[e("ul",{staticClass:"tab-list"},[e("li",{staticClass:"item",class:{"item-on":1==t.currentTab},on:{click:function(e){t.changeTab(1)}}},["资料"])," ",e("li",{staticClass:"item",class:{"item-on":2==t.currentTab},on:{click:function(e){t.changeTab(2)}}},["设置"])])])," ",1==t.currentTab?e("div",{staticClass:"tab-panel"},[e("div",{staticClass:"group-notice"},[t._m(0)," ",e("div",{staticClass:"group-notice-content"},[e("span",[t._s(t.groupInfo.notice?t.groupInfo.notice:"暂无公告")])])])," ",e("div",{staticClass:"group-members"},[e("div",{staticClass:"group-members-header"},["成员("+t._s(t.members.length)+"人)"])," ",e("div",{staticClass:"group-members-add member",on:{click:t.addGroupMembers}},[e("i",{staticClass:"iconfont icon-tianjia avatar"})," ",e("span",{staticClass:"name"},["添加成员"])])," ",e("div",{staticClass:"group-members-list"},[t._l(t.members,function(s){return e("div",{staticClass:"member"},[e("div",{staticClass:"avatar"},[e("img",{staticClass:"round-avatar base-avatar ",attrs:{src:s.avatar}})])," ",e("span",{staticClass:"name"},[t._s(s.name)])])})])])]):e("div",{staticClass:"tab-panel",on:{click:function(e){t.changeTab(2)}}},[e("div",{staticClass:"tab-panel-settings"},[e("div",{staticClass:"group-notice"},[e("div",{staticClass:"group-name-header"},[e("span",["群名称"])])," ",e("div",{staticClass:"group-name-content"},[e("span",[t._s(t.groupInfo.name)])])," ",e("div",{staticClass:"group-admin-header"},[e("span",["群管理员"])])," ",e("div",{staticClass:"group-admin-content"},[e("span",[t._s(t.groupInfo.admin.name)])])])," ",e("div",{staticClass:"group-options"},[e("div",{staticClass:"comp-switch"},[e("span",["群置顶"])," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.option.top,expression:"option.top"}],attrs:{type:"checkbox",readonly:""},domProps:{checked:1==t.option.top,checked:Array.isArray(t.option.top)?t._i(t.option.top,null)>-1:t._q(t.option.top,!0)},on:{change:function(e){var s=t.option.top,i=e.target,a=!!i.checked;if(Array.isArray(s)){var n=null,o=t._i(s,n);a?o<0&&(t.option.top=s.concat(n)):o>-1&&(t.option.top=s.slice(0,o).concat(s.slice(o+1)))}else t.option.top=a}}})," ",e("div",{staticClass:"switch-round",on:{click:function(e){t.switchOption("top")}}})])," ",e("div",{staticClass:"comp-switch"},[e("span",["消息免打扰"])," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.option.remind,expression:"option.remind"}],attrs:{type:"checkbox",readonly:""},domProps:{checked:1==t.option.remind,checked:Array.isArray(t.option.remind)?t._i(t.option.remind,null)>-1:t._q(t.option.remind,!0)},on:{change:function(e){var s=t.option.remind,i=e.target,a=!!i.checked;if(Array.isArray(s)){var n=null,o=t._i(s,n);a?o<0&&(t.option.remind=s.concat(n)):o>-1&&(t.option.remind=s.slice(0,o).concat(s.slice(o+1)))}else t.option.remind=a}}})," ",e("div",{staticClass:"switch-round",on:{click:function(e){t.switchOption("remind")}}})])," ",e("div",{staticClass:"comp-switch"},[e("span",["保存到群组列表"])," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.option.favor,expression:"option.favor"}],attrs:{type:"checkbox",readonly:""},domProps:{checked:1==t.option.favor,checked:Array.isArray(t.option.favor)?t._i(t.option.favor,null)>-1:t._q(t.option.favor,!0)},on:{change:function(e){var s=t.option.favor,i=e.target,a=!!i.checked;if(Array.isArray(s)){var n=null,o=t._i(s,n);a?o<0&&(t.option.favor=s.concat(n)):o>-1&&(t.option.favor=s.slice(0,o).concat(s.slice(o+1)))}else t.option.favor=a}}})," ",e("div",{staticClass:"switch-round",on:{click:function(e){t.switchOption("favor")}}})])])])," ",e("div",{staticClass:"wrapper-group-button"},[e("button",{staticClass:"button comp-btn",attrs:{type:"button"},on:{click:t.leaveGroup}},["退出群组"])])])," "])},staticRenderFns:[function(){var t=this,e=t.$createElement;return e("div",{staticClass:"group-notice-header"},[e("span",["群公告"])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",[e("RosterList",{attrs:{rosterList:t.rosterList},on:{showRoster:t.showRoster}})," ",t.rosterInfo.uid?e("RosterInfo",{attrs:{rosterInfo:t.rosterInfo}}):e("Empty")," "])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",{staticClass:"empty"})},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",{staticClass:"sendbox"},[e("div",{staticClass:"tool-wrapper"},[e("span",{staticClass:"emoji"},[e("i",{staticClass:"iconfont icon-xiaolian",on:{click:t.showEmoji}})," ",e("div",{directives:[{name:"show",rawName:"v-show",value:t.emoji,expression:"emoji"}],staticClass:"emoji-wrapper"},[e("div",{staticClass:"classic-panel"},[e("div",[t._l(t.EmojiClassic,function(s){return e("span",{staticClass:"emoji-icon",attrs:{title:s[0],ubb:s[1]},on:{click:function(e){t.sendEmoji(s[1])}}},[e("img",{attrs:{src:s[2]}})])})])])," ",e("span",{staticClass:"arrow"})])])," ",e("span",{staticClass:"fileupload"},[e("i",{staticClass:"iconfont icon-fasongwenjian",on:{click:t.uploadFile}})," ",t.upload?e("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"uploadFile"},on:{change:t.onAddFile}}):t._e()])])," ",e("div",{staticClass:"input-wrapper"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.inputText,expression:"inputText"}],attrs:{id:"inputText",name:"inputText",placeholder:"说点什么……"},domProps:{value:t._s(t.inputText)},on:{keyup:[function(e){t._k(e.keyCode,"enter",13)||e.shiftKey&&(e.preventDefault(),t.doSendMessage(e))},function(e){t._k(e.keyCode,"enter",13)||(e.preventDefault(),t.doSendMessage(e))}],input:function(e){e.target.composing||(t.inputText=e.target.value)}}})])," ",e("div",{staticClass:"send-wrapper"},[e("div",[e("span",{staticClass:"send-tip"},["Shift + Enter 换行, Enter 发送"])," ",e("button",{staticClass:"send-button button button-primary button-sm",attrs:{type:"button"},on:{click:t.sendMessage}},["发 送"])])])," ",t.url?e("div",{staticClass:"upload-mask-wrapper"},[e("div",{staticClass:"upload-mask"},[e("div",{staticClass:"preview"},[e("img",{attrs:{src:t.url}})])," ",e("div",{staticClass:"btnbar"},[e("button",{staticClass:"button",on:{click:function(e){t.url=""}}},["取消"])," ",e("button",{staticClass:"button button-primary",on:{click:t.sendMessage}},["发送"])])])]):t._e()," ",t.emoji?e("div",{staticClass:"emoji-mask-wrapper",on:{click:function(e){e.target===e.currentTarget&&(t.emoji=!1)}}}):t._e()])},staticRenderFns:[]}}]);
//# sourceMappingURL=app.205a8af941873ba6b928.js.map